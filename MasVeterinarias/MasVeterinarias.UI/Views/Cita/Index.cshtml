@model IEnumerable<MasVeterinarias.UI.Models.Cita>

@{
    ViewData["Title"] = "Index";
    Layout = "_LayoutV";
}

<head>
    <meta charset='utf-8' />
    <link href='~/css/main.css' rel='stylesheet' />
    <script src='~/js/main.js'></script>
    <script>

        document.addEventListener('DOMContentLoaded', function () {
            var calendarEl = document.getElementById('calendar');

            var calendar = new FullCalendar.Calendar(calendarEl, {

                headerToolbar: {
                    left: 'prev,next today',
                    center: 'title',
                    right: 'listDay,listWeek,listMonth'
                },

                // customize the button names,
                // otherwise they'd all just say "list"
                views: {
                    listDay: { buttonText: 'lista diaria' },
                    listWeek: { buttonText: 'lista Semanal' },
                    listMonth: { buttonText: 'lista Mensual' }
                },

                initialView: 'listDay',
                navLinks: true, // can click day/week names to navigate views
                editable: true,
                dayMaxEvents: true,
                // allow "more" link when too many events
                eventClick: function (info) {
                    $('#txtId').val(info.id);
                    $('#exampleModal').modal();
                    console.log(info);
                    console.log(info.event.id);
                    console.log(info.event.title);
                    console.log(info.event.extendedProps.user);
                    console.log(info.event.extendedProps.pet);
                    console.log(info.event.extendedProps.service);
                    console.log(info.event.start);
                    console.log(info.event.end);
                    console.log(info.event.extendedProps.status);
                },

               

                events: [
                    {
                        title: 'All Day Event',
                        start: '2020-09-01'
                    },
                    {
                        title: 'Long Event',
                        start: '2020-09-07',
                        end: '2020-09-10'
                    },
                    {
                        groupId: 999,
                        title: 'Repeating Event',
                        start: '2020-09-09T16:00:00'
                    },
                    {
                        groupId: 999,
                        title: 'Repeating Event',
                        start: '2020-09-16T16:00:00'
                    },
                    {
                        title: 'Conference',
                        start: '2020-09-11',
                        end: '2020-09-13'
                    },
                    {
                        title: 'Meeting',
                        start: '2020-09-12T10:30:00',
                        end: '2020-09-12T12:30:00'
                    },
                    {
                        title: 'Lunch',
                        start: '2020-09-12T12:00:00'
                    },
                    {
                        title: 'Meeting',
                        start: '2020-09-12T14:30:00'
                    },
                    {
                        title: 'Happy Hour',
                        start: '2020-09-12T17:30:00'
                    },
                    {
                        title: 'Dinner',
                        start: '2020-09-12T20:00:00'
                    },
                    {
                        title: 'Birthday Party',
                        start: '2020-09-13T07:00:00'
                    },
                    
                ]

            });
            calendar.setOption('locale', 'Es');
            calendar.render();

            $('#btnEdit').click(function(){
                
            });

            function GetDataUI(method)
            {

                NewEven = {
                    Id: $('#txtId').val(),
                    ClienteId: $('#txtClient').val(),
                    NombreMascota: $('#txtPet').val(),
                    Hora: $('#txtStart').val(),
                    Fecha: $('#txtFecha').val(),
                    ServicioId: $('#txtService').val(),
                    '_method': method
                }
                return(NewEven);

            }

            var Cita = [];
            $.ajax({
                type: "GET",
                url: "/Cita/GetEvents",
                success: function (Citas) {
                    $.each(Citas, function (i, v) {
                        Cita.push({
                            id: v.Id,                                                    
                            start: v.Fecha,
                            
                        });
                    })

                    GenerateCalender(Cita);
                },
                error: function (error) {
                    alert('failed');
                }
            })

           

           
        });

    </script>
    <style>

        body {
            margin: 100px 0px;
            padding: 0px;
            font-family: Arial, Helvetica Neue, Helvetica, sans-serif;
            font-size: 14px;
           
        }

        #calendar {
            max-width: 1100px;
            margin: 0 auto;
            
        }
    </style>
</head>

<body>
    <div id='calendar'></div>
    <!-- Modal -->
    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Datos de la cita</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    Id:
                    <input type="text" name="txtId" id="txtId">
                    <br />
                    Cliente:
                    <input type="text" name="txtClient" id="txtClient">
                    <br />
                    Mascota:
                    <input type="text" name="txtPet" id="txtPet">
                    <br />
                    Servicio:
                    <input type="text" name="txtService" id="txtService">
                    <br />
                    Fecha:
                    <input type="text" name="txtFecha" id="txtFecha">
                    <br />
                    Hora:
                    <input type="text" name="txtStart" id="txtStart">
                    <br />
                    Status:
                    <input type="text" name="txtStatus" id="txtStatus">
                    <br />
                </div>
                <div class="modal-footer">
                    <button id="btnEdit" class="btn btn-success">Aceptar</button>
                    <button id="btnDelete"class="btn btn-danger">Rechazar</button>
                </div>
            </div>
        </div>
    </div>
</body>



